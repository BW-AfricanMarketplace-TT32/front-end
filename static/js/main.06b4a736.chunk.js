(this.webpackJsonpsilk_road=this.webpackJsonpsilk_road||[]).push([[0],{107:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n.n(a),s=n(39),r=n.n(s),o=n(13),l=n(8),d=n(2),j=n(5),b=n(4),u=n(96),m=function(e){var t=e.component,n=Object(u.a)(e,["component"]);return Object(c.jsx)(b.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return localStorage.getItem("token")?Object(c.jsx)(t,Object(d.a)(Object(d.a)({},e),n)):Object(c.jsx)(b.a,{to:"/login"})}}))},h=n(25),O=n(26),p=n(17),x="SET_LOGGED_STATUS",g="SET_ITEMS",f="SET_CATEGORIES",v=function(e){return{type:x,payload:e}},w=function(e){return{type:g,payload:e}};function y(){var e=Object(h.a)(["\n  border: 1px solid black;\n  background-color: black;\n\n  .ul {\n    width: 95%;\n    color: red;\n    display: flex;\n    justify-content: space-between;\n    list-style: none;\n  }\n\n  .ul a {\n    font-size: 1.25rem;\n    color: white;\n    text-decoration: none;\n    cursor: pointer;\n  }\n"]);return y=function(){return e},e}var k=O.a.div(y());var N=Object(p.b)((function(e){return{isLoggedIn:e.isLoggedIn}}),{setLoggedStatus:v})((function(e){var t=Object(b.g)();return Object(c.jsx)("div",{children:e.isLoggedIn?Object(c.jsx)(k,{children:Object(c.jsxs)("ul",{className:"ul",children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/",children:"Home"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/dashboard",children:"My Shop"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/market",children:"Market"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{onClick:function(){localStorage.removeItem("token"),e.setLoggedStatus(!1),t.push("/")},children:"Log Out"})})]})}):Object(c.jsx)(k,{children:Object(c.jsxs)("ul",{className:"ul",children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/",children:"Home "})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/dashboard",children:"My Shop"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/register",children:"Register"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/market",children:"Market"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/login",children:"Log In"})})]})})})}));n(57);function _(e){var t=e.values,n=e.submit,a=e.change,i=e.disabled,s=e.errors;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N,{}),Object(c.jsx)("div",{className:"bg-container",children:Object(c.jsxs)("div",{className:"login-container",children:[Object(c.jsx)("h1",{children:"Login"}),Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("i",{className:"fas fa-user"}),Object(c.jsx)("input",{type:"email",name:"email",value:t.email,onChange:a,placeholder:"johndoe@email.com"})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("i",{className:"fas fa-lock"}),Object(c.jsx)("input",{type:"password",name:"password",value:t.password,onChange:a,placeholder:"secure password"})]}),Object(c.jsx)("div",{className:"error",children:s.email}),Object(c.jsx)("div",{className:"error",children:s.password}),Object(c.jsx)("input",{type:"submit",value:"Submit",id:"submitBtn",disabled:i})]})]})})]})}var I=n.p+"static/media/George.726e9450.png",S=n.p+"static/media/Victoria.bb5f4d9a.jpeg",R=n.p+"static/media/Leah.51ca807e.jpeg",E=n.p+"static/media/Christina.1aa5dc20.jpeg";function C(){var e=Object(h.a)(["\n  .bodyDiv {\n    background-color: #b22222;\n    color: white;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n  }\n  .paraDiv {\n    text-align: center;\n    padding: 30px;\n    border: 1px solid white;\n  }\n  h1 {\n    letter-spacing: 0.65rem;\n    text-shadow: 2px 2px black;\n    display: block;\n    width: 100%;\n    text-align: center;\n  }\n  .paraDiv .sections {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n\n  .team img {\n    width: 20%;\n    border-radius: 100%;\n  }\n\n  .imgDiv {\n    width: 45%;\n    display: flex;\n    align-items: center;\n    margin: 0 auto;\n  }\n  .imgDiv img {\n    width: 100%;\n    height: auto;\n  }\n"]);return C=function(){return e},e}var D=O.a.div(C());function A(){return Object(c.jsxs)(D,{children:[Object(c.jsx)(N,{}),Object(c.jsxs)("div",{className:"bodyDiv",children:[Object(c.jsx)("h1",{children:"African Marketplace"}),Object(c.jsxs)("div",{className:"paraDiv",children:[Object(c.jsxs)("div",{className:"sections",children:[Object(c.jsxs)("div",{className:"about",children:[Object(c.jsx)("h2",{children:"About Us"}),Object(c.jsx)("p",{children:"African marketplace provides trade and market information services that empower cross-border traders to trade legally, profitably, and safely."})]}),Object(c.jsxs)("div",{className:"services",children:[Object(c.jsx)("h2",{children:"Services"}),Object(c.jsx)("p",{children:"Centralized online market for both vendors and customers."})]})]}),Object(c.jsxs)("div",{className:"team",children:[Object(c.jsx)("h2",{children:"Our Team"}),Object(c.jsx)("img",{src:S,alt:"avatar"}),Object(c.jsx)("img",{src:E,alt:"avatar"}),Object(c.jsx)("img",{src:R,alt:"avatar"}),Object(c.jsx)("img",{src:I,alt:"avatar"})]})]})]})]})}function L(e){var t=e.cartItems,n=e.onAdd,a=e.onDelete;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("aside",{className:"block col-1",children:[Object(c.jsx)("h2",{children:"Cart Items"}),Object(c.jsxs)("div",{children:[0===t.length&&Object(c.jsx)("div",{children:"Cart is empty"}),t.map((function(e){return Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-2",children:e.name}),Object(c.jsxs)("div",{className:"col-2",children:[Object(c.jsx)("button",{className:"add",onClick:function(){return n(e)},children:"+"}),Object(c.jsx)("button",{className:"delete",onClick:function(){return a(e)},children:"-"})]}),Object(c.jsxs)("div",{className:"col-2 text-right",children:[e.qty," x R ",e.price.toFixed(2)]})]},e.id)}))]})]})})}function q(e){var t=e.product,n=e.onAdd;return Object(c.jsxs)("div",{className:"product",children:[Object(c.jsx)("img",{src:t.imgURL,alt:t.name}),Object(c.jsx)("h3",{children:t.name}),Object(c.jsxs)("div",{children:[t.price," ZAR"]}),Object(c.jsx)("button",{onClick:function(){return n(t)},className:"btn",children:"Add to cart"})]})}n(107);function T(e){var t=e.products,n=e.cartItems,a=e.onAdd,i=e.onDelete;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N,{}),Object(c.jsxs)("main",{className:"market-container row",children:[Object(c.jsxs)("div",{className:"block col-2",children:[Object(c.jsx)("h1",{children:"Market"}),Object(c.jsx)("div",{className:"row",children:t.map((function(e){return Object(c.jsx)(q,{onDelete:i,onAdd:a,product:e},t.id)}))})]}),Object(c.jsx)(L,{onDelete:i,onAdd:a,cartItems:n})]})]})}var M=n(32),G=n.n(M),U=function(){var e=localStorage.getItem("token");return G.a.create({headers:{Authorization:e},baseURL:"https://bw-african-marketplace-tt32.herokuapp.com/"})};function z(){var e=Object(h.a)(["\n  color: black;\n  background-color: #8f1313;\n  font-size: 2rem;\n\n  h6 {\n    color: white;\n    text-shadow: 1px 1px black;\n    margin-left: 2rem;\n  }\n  .welcome h2 {\n    color: white;\n    margin-left: 2rem;\n  }\n  ul {\n    margin: 4px 0 14px 0;\n  }\n\n  .addItem {\n    width: 40%;\n    padding-bottom: 5rem;\n    display: flex;\n    flex-direction: column;\n    padding: 2rem;\n  }\n\n  .addItem .input {\n    color: white;\n    font-size: 1rem;\n    margin: 1rem auto;\n  }\n\n  .welcome {\n    color: white;\n  }\n\n  .category {\n    color: white;\n    font-size: 1rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .eachCategory {\n    border: 1px solid white;\n    font-size: 1rem;\n    width: 20%;\n    text-align: center;\n  }\n\n  .bigItemDiv {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-around;\n    align-items: center;\n  }\n\n  .smallItemDiv {\n    width: 20%;\n    min-width: 200px;\n    font-size: 1rem;\n    border: 1px solid red;\n    background-color: white;\n    opacity: 0.7;\n    text-align: center;\n    margin: 10px;\n  }\n\n  .smallItemDiv .btn {\n    opacity: 2;\n    color: white;\n    background-color: black;\n    padding: 0.5rem;\n    font-size: 1rem;\n    width: auto;\n  }\n"]);return z=function(){return e},e}var F=O.a.div(z()),P={item_name:"",item_description:"",item_price:0,location_id:0,category_id:0};var B=Object(p.b)((function(e){return{categories:e.categories,items:e.items}}),{setItems:w,setCategories:function(e){return{type:f,payload:e}}})((function(e){var t=Object(a.useState)(P),n=Object(j.a)(t,2),i=n[0],s=n[1],r=function(e){s(Object(d.a)(Object(d.a)({},i),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(a.useEffect)((function(){U().get("items/categories/list").then((function(t){e.setCategories(t.data)})).catch((function(e){console.log(e,"GET REQUEST ERROR")})),U().get("items").then((function(t){e.setItems(t.data)})).catch((function(e){console.log("DASHBOARD ERROR:",e)}))}),[]),Object(c.jsxs)(F,{children:[Object(c.jsx)(N,{}),Object(c.jsx)("div",{className:"welcome",children:Object(c.jsx)("h4",{children:"Welcome back!"})}),Object(c.jsx)("h6",{children:"Categories available:"}),Object(c.jsx)("div",{className:"category",children:e.categories.map((function(e){return Object(c.jsxs)("div",{className:"eachCategory",children:[Object(c.jsxs)("p",{children:["Category ",e.category_id]}),Object(c.jsx)("p",{children:e.category_name})]},e.category_id)}))}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h6",{children:"Your Items:"}),Object(c.jsx)("div",{className:"bigItemDiv",children:e.items.map((function(t){return Object(c.jsxs)("div",{className:"smallItemDiv",children:[Object(c.jsx)("p",{children:t.item_name}),Object(c.jsx)("p",{children:t.item_description}),Object(c.jsxs)("p",{children:["Category: ",t.category_name]}),Object(c.jsxs)("p",{children:["$",t.item_price]}),Object(c.jsx)("button",{className:"btn",children:"Edit"}),Object(c.jsx)("button",{className:"btn",onClick:function(n){var c;c=t.item_id,U().delete("items/".concat(c)).then((function(t){w(e.items.filter((function(e){return e.item_id!==c}))),window.location.reload()})).catch((function(e){console.log("DELETE ITEM ERROR:",e)}))},children:"Delete"})]},t.item_id)}))}),Object(c.jsxs)("div",{className:"addItem",children:[Object(c.jsx)("h6",{children:"Add An Item:"}),Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),U().post("items",i).then((function(t){w(e.items.push(t.data)),s({item_name:"",item_description:"",item_price:0,location_id:0,category_id:0})})).catch((function(e){console.log("ADD ITEM ERROR:",e)}))},children:[Object(c.jsx)("div",{className:"input",children:Object(c.jsxs)("label",{children:["Item Name:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"item_name",onChange:r,value:i.item_name})]})}),Object(c.jsx)("div",{className:"input",children:Object(c.jsxs)("label",{children:["Description: ",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"item_description",onChange:r,value:i.item_description})]})}),Object(c.jsx)("div",{className:"input",children:Object(c.jsxs)("label",{children:["Price: ",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"item_price",onChange:r,value:i.item_price})]})}),Object(c.jsx)("div",{className:"input",children:Object(c.jsxs)("label",{children:["Location: ",Object(c.jsx)("br",{}),Object(c.jsxs)("select",{name:"location_id",value:i.location_id,onChange:r,children:[Object(c.jsx)("option",{value:"",children:"- Select an option -"}),Object(c.jsx)("option",{value:1,children:"1 - Mombasa"}),Object(c.jsx)("option",{value:2,children:"2 - Nairobi"}),Object(c.jsx)("option",{value:3,children:"3 - Kisii"}),Object(c.jsx)("option",{value:4,children:"4 - Embu"})]})]})}),Object(c.jsx)("div",{className:"input",children:Object(c.jsxs)("label",{children:["Category: ",Object(c.jsx)("br",{}),Object(c.jsxs)("select",{name:"category_id",value:i.category_id,onChange:r,children:[Object(c.jsx)("option",{value:"",children:"- Select an option -"}),Object(c.jsx)("option",{value:1,children:"1 - Animal Products"}),Object(c.jsx)("option",{value:2,children:"2 - Dry Goods"}),Object(c.jsx)("option",{value:3,children:"3 - Fruits and Vegetables"}),Object(c.jsx)("option",{value:4,children:"4 - Other"})]})]})}),Object(c.jsx)("button",{type:"submit",children:"Add Item"})]})]})]})]})})),H=n(11),V=H.a().shape({email:H.c().required("Email address is required"),password:H.c().required("Password is required")});function Q(e){var t=e.submit,n=e.values,a=e.change,i=e.errors,s=e.disabled;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N,{}),Object(c.jsx)("div",{className:"bg-container",children:Object(c.jsxs)("div",{className:"login-container",children:[Object(c.jsx)("h1",{children:"Register"}),Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("i",{class:"fas fa-user"}),Object(c.jsx)("input",{type:"email",name:"email",value:n.email,onChange:a,placeholder:"johndoe@email.com"})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("i",{class:"fas fa-lock"}),Object(c.jsx)("input",{type:"password",name:"password",value:n.password,onChange:a,placeholder:"secure password"})]}),Object(c.jsxs)("div",{className:"role",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",name:"admin_status",value:1,onChange:a,placeholder:"johndoe@email.com"}),"Merchant"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",name:"admin_status",value:0,onChange:a,placeholder:"secure password"}),"Customer"]})]}),Object(c.jsx)("div",{className:"error",children:i.email}),Object(c.jsx)("div",{className:"error",children:i.password}),Object(c.jsx)("div",{className:"error",children:i.admin}),Object(c.jsx)("input",{type:"submit",value:"Submit",id:"submitBtn",disabled:s})]})]})})]})}var W=H.a().shape({email:H.c().required("Email address is required"),password:H.c().required("Password is required").min(8,"Password must be at least 8 characters"),admin_status:H.c().oneOf(["0","1"],"Please select your role.")}),Y={products:[{name:"Brown Rice (1kg)",id:0,price:20.76,imgURL:"https://cdn-anini.nitrocdn.com/YXYWQiDcFcdQfctewEkORZwdFNalbmHA/assets/static/optimized/rev-fcd288e/wp-content/uploads/2016/01/Brown-Long-Grain-Rice.jpg"},{name:"Apples (1kg)",id:1,price:30.69,imgURL:"https://image.freepik.com/free-photo/close-up-view-some-red-apples-isolated-white-background_69593-1582.jpg"},{name:"Potatoes (5kg)",id:2,price:46.65,imgURL:"https://image.freepik.com/free-photo/fresh-potatoes-isolated-white-background_33736-2512.jpg"},{name:"Bananas (2kg)",id:3,price:42.48,imgURL:"https://upload.wikimedia.org/wikipedia/commons/a/aa/Bananas_%28white_background%29.jpg"},{name:"Avocados (3kg)",id:4,price:38.21,imgURL:"https://www.seekpng.com/png/detail/14-147195_avocado-png-image-avocado-with-white-background.png"}]},J={email:"",password:""},Z={email:"",password:""},K={email:"",password:"",admin_status:null},X={email:"",password:"",main:""};var $=Object(p.b)((function(e){return{isLoggedIn:e.isLoggedIn}}),{setLoggedStatus:v})((function(){var e=Object(a.useState)(J),t=Object(j.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(Z),r=Object(j.a)(s,2),u=r[0],h=r[1],O=Object(a.useState)(!0),p=Object(j.a)(O,2),x=p[0],g=p[1],f=Object(b.g)(),w=Object(a.useState)(K),y=Object(j.a)(w,2),k=y[0],N=y[1],I=Object(a.useState)(X),S=Object(j.a)(I,2),R=S[0],E=S[1],C=Object(a.useState)(!0),D=Object(j.a)(C,2),L=D[0],q=D[1],M=Y.products,U=Object(a.useState)([]),z=Object(j.a)(U,2),F=z[0],P=z[1];return Object(a.useEffect)((function(){V.isValid(n).then((function(e){return g(!e)}))}),[n]),Object(a.useEffect)((function(){W.isValid(k).then((function(e){return q(!e)}))}),[k]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(b.d,{children:[Object(c.jsx)(b.b,{path:"/market",children:Object(c.jsx)(T,{onDelete:function(e){var t=F.find((function(t){return t.id===e.id}));1===t.qty?P(F.filter((function(t){return t.id!==e.id}))):P(F.map((function(n){return n.id===e.id?Object(d.a)(Object(d.a)({},t),{},{qty:t.qty-1}):n})))},onAdd:function(e){var t=F.find((function(t){return t.id===e.id}));P(t?F.map((function(n){return n.id===e.id?Object(d.a)(Object(d.a)({},t),{},{qty:t.qty+1}):n})):[].concat(Object(l.a)(F),[Object(d.a)(Object(d.a)({},e),{},{qty:1})]))},products:M,cartItems:F})}),Object(c.jsx)(b.b,{path:"/login",children:Object(c.jsx)(_,{values:n,submit:function(e){e.preventDefault(),G.a.post("https://bw-african-marketplace-tt32.herokuapp.com/auth/login",n).then((function(e){localStorage.setItem("token",e.data.token),v(!0)})).then((function(){f.push("/dashboard"),window.location.reload()})).catch((function(e){console.log(e,"ERROR SOMETHING IS WRONG")}))},change:function(e){var t=e.target.name,c=e.target.value;H.b(V,t).validate(c).then((function(){h(Object(d.a)(Object(d.a)({},u),{},Object(o.a)({},t,"")))})).catch((function(e){h(Object(d.a)(Object(d.a)({},u),{},Object(o.a)({},t,e.errors[0])))})),i(Object(d.a)(Object(d.a)({},n),{},Object(o.a)({},t,c)))},errors:u,disabled:x})}),Object(c.jsx)(b.b,{exact:!0,path:"/",children:Object(c.jsx)(A,{})}),Object(c.jsx)(b.b,{path:"/register",children:Object(c.jsx)(Q,{values:k,submit:function(e){e.preventDefault(),console.log("submitted info:",k),G.a.post("https://bw-african-marketplace-tt32.herokuapp.com/auth/register",k).then((function(){N({email:"",password:"",admin_status:0}),f.push("/login")})).catch((function(e){console.log(e,"NOPE ERROR IN REGISTRATION")}))},change:function(e){var t=e.target.name,n=e.target.value;console.log(e.target.value,"CHANGE VALUES"),H.b(W,t).validate(n).then((function(){E(Object(d.a)(Object(d.a)({},R),{},Object(o.a)({},t,"")))})).catch((function(e){E(Object(d.a)(Object(d.a)({},R),{},Object(o.a)({},t,e.errors[0])))})),N(Object(d.a)(Object(d.a)({},k),{},Object(o.a)({},t,n)))},errors:R,disabled:L})}),Object(c.jsx)(m,{path:"/dashboard",component:B})]})})})),ee=n(22),te=n(95),ne=n(31),ce={user:null,isLoggedIn:!!localStorage.getItem("token"),items:[],categories:[],isFetching:!1,error:""},ae=Object(ne.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(d.a)(Object(d.a)({},e),{},{items:t.payload});case x:return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{categories:t.payload});default:return e}}),Object(ne.a)(te.a));r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(p.a,{store:ae,children:Object(c.jsx)(ee.a,{children:Object(c.jsx)($,{})})})}),document.querySelector("#root"))},57:function(e,t,n){}},[[223,1,2]]]);
//# sourceMappingURL=main.06b4a736.chunk.js.map